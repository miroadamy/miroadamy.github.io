<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Elastic search and Kibana - getting started - Miro&#39;s World</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Miro Adamy" /><meta name="description" content="#Installation:
See 
curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip unzip elasticsearch-$VERSION.zip cd elasticsearch-$VERSION Marvel is management plugin - console about cluster. Install:
./bin/plugin -i elasticsearch/marvel/latest # disable data collection for local cluster echo &amp;#39;marvel.agent.enabled: false&amp;#39; &amp;gt;&amp;gt; ./config/elasticsearch.yml Test Startup log:
➜ elasticsearch-1.3.2 bin/elasticsearch [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] version[1.3.2], pid[59610], build[dee175d/2014-08-13T14:29:30Z] [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] initializing ... [2014-08-27 11:17:08,338][INFO ][plugins ] [Joe Fixit] loaded [marvel], sites [marvel, kopf] [2014-08-27 11:17:10,905][INFO ][marvel." /><meta name="keywords" content="blog, Miro" />






<meta name="generator" content="Hugo 0.68.3 with theme even" />


<link rel="canonical" href="https://miroadamy.com/posts/2014-08-27-es1/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Elastic search and Kibana - getting started" />
<meta property="og:description" content="#Installation:
See 
curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip unzip elasticsearch-$VERSION.zip cd elasticsearch-$VERSION Marvel is management plugin - console about cluster. Install:
./bin/plugin -i elasticsearch/marvel/latest # disable data collection for local cluster echo &#39;marvel.agent.enabled: false&#39; &gt;&gt; ./config/elasticsearch.yml Test Startup log:
➜ elasticsearch-1.3.2 bin/elasticsearch [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] version[1.3.2], pid[59610], build[dee175d/2014-08-13T14:29:30Z] [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] initializing ... [2014-08-27 11:17:08,338][INFO ][plugins ] [Joe Fixit] loaded [marvel], sites [marvel, kopf] [2014-08-27 11:17:10,905][INFO ][marvel." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://miroadamy.com/posts/2014-08-27-es1/" />
<meta property="article:published_time" content="2014-08-27T11:22:48+08:00" />
<meta property="article:modified_time" content="2014-08-27T11:22:48+08:00" />
<meta itemprop="name" content="Elastic search and Kibana - getting started">
<meta itemprop="description" content="#Installation:
See 
curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip unzip elasticsearch-$VERSION.zip cd elasticsearch-$VERSION Marvel is management plugin - console about cluster. Install:
./bin/plugin -i elasticsearch/marvel/latest # disable data collection for local cluster echo &#39;marvel.agent.enabled: false&#39; &gt;&gt; ./config/elasticsearch.yml Test Startup log:
➜ elasticsearch-1.3.2 bin/elasticsearch [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] version[1.3.2], pid[59610], build[dee175d/2014-08-13T14:29:30Z] [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] initializing ... [2014-08-27 11:17:08,338][INFO ][plugins ] [Joe Fixit] loaded [marvel], sites [marvel, kopf] [2014-08-27 11:17:10,905][INFO ][marvel.">
<meta itemprop="datePublished" content="2014-08-27T11:22:48&#43;08:00" />
<meta itemprop="dateModified" content="2014-08-27T11:22:48&#43;08:00" />
<meta itemprop="wordCount" content="598">



<meta itemprop="keywords" content="elasticsearch,elk,search," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Elastic search and Kibana - getting started"/>
<meta name="twitter:description" content="#Installation:
See 
curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip unzip elasticsearch-$VERSION.zip cd elasticsearch-$VERSION Marvel is management plugin - console about cluster. Install:
./bin/plugin -i elasticsearch/marvel/latest # disable data collection for local cluster echo &#39;marvel.agent.enabled: false&#39; &gt;&gt; ./config/elasticsearch.yml Test Startup log:
➜ elasticsearch-1.3.2 bin/elasticsearch [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] version[1.3.2], pid[59610], build[dee175d/2014-08-13T14:29:30Z] [2014-08-27 11:17:08,325][INFO ][node ] [Joe Fixit] initializing ... [2014-08-27 11:17:08,338][INFO ][plugins ] [Joe Fixit] loaded [marvel], sites [marvel, kopf] [2014-08-27 11:17:10,905][INFO ][marvel."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Miro&#39;s World</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/posts/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Miro&#39;s World</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/posts/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Elastic search and Kibana - getting started</h1>

      <div class="post-meta">
        <span class="post-time"> 2014-08-27 </span>
        <div class="post-category">
            <a href="/categories/devops/"> devops </a>
            </div>
          <span class="more-meta"> 598 words </span>
          <span class="more-meta"> 3 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#cluster">Cluster</a></li>
  </ul>

  <ul>
    <li><a href="#restfull-api---9200">Restfull API - 9200</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>#Installation:</p>
<p>See <a href="http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/_installing_elasticsearch.html"></a></p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">curl -L -O http://download.elasticsearch.org/PATH/TO/VERSION.zip
unzip elasticsearch-$VERSION.zip
cd  elasticsearch-$VERSION
</code></pre></div><p>Marvel is management plugin - console about cluster. Install:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">./bin/plugin -i elasticsearch/marvel/latest
# disable data collection for local cluster

echo &#39;marvel.agent.enabled: false&#39; &gt;&gt; ./config/elasticsearch.yml
</code></pre></div><h1 id="test">Test</h1>
<p>Startup log:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">➜  elasticsearch-1.3.2  bin/elasticsearch
[2014-08-27 11:17:08,325][INFO ][node                     ] [Joe Fixit] version[1.3.2], pid[59610], build[dee175d/2014-08-13T14:29:30Z]
[2014-08-27 11:17:08,325][INFO ][node                     ] [Joe Fixit] initializing ...
[2014-08-27 11:17:08,338][INFO ][plugins                  ] [Joe Fixit] loaded [marvel], sites [marvel, kopf]
[2014-08-27 11:17:10,905][INFO ][marvel.agent             ] [Joe Fixit] collecting disabled by settings
[2014-08-27 11:17:11,020][INFO ][node                     ] [Joe Fixit] initialized
[2014-08-27 11:17:11,021][INFO ][node                     ] [Joe Fixit] starting ...
[2014-08-27 11:17:11,131][INFO ][transport                ] [Joe Fixit] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/192.168.179.121:9300]}
[2014-08-27 11:17:11,148][INFO ][discovery                ] [Joe Fixit] elasticsearch/nNgRXlHARHCPutTq7dZXWg
[2014-08-27 11:17:14,160][INFO ][cluster.service          ] [Joe Fixit] new_master [Joe Fixit][nNgRXlHARHCPutTq7dZXWg][Miros-MacBook-Pro-2.local][inet[/192.168.179.121:9300]], reason: zen-disco-join (elected_as_master)
[2014-08-27 11:17:14,181][INFO ][http                     ] [Joe Fixit] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/192.168.179.121:9200]}
[2014-08-27 11:17:14,181][INFO ][node                     ] [Joe Fixit] started
[2014-08-27 11:17:14,726][INFO ][gateway                  ] [Joe Fixit] recovered [4] indices into cluster_state
[2014-08-27 11:18:00,491][INFO ][cluster.service          ] [Joe Fixit] added {[logstash-Miros-MacBook-Pro-2.local-59618-4086][Eh5YjUFxSIWIn4xK45xu0w][Miros-MacBook-Pro-2.local][inet[/192.168.179.121:9301]]{client=true, data=false},}, reason: zen-disco-receive(join from node[[logstash-Miros-MacBook-Pro-2.local-59618-4086][Eh5YjUFxSIWIn4xK45xu0w][Miros-MacBook-Pro-2.local][inet[/192.168.179.121:9301]]{client=true, data=false}])
Installed some pluggins - marvel, kopf ...

 

➜  ~  curl &#39;http://localhost:9200/?pretty&#39;
{
  &#34;status&#34; : 200,
  &#34;name&#34; : &#34;Sea Urchin&#34;,
  &#34;version&#34; : {
    &#34;number&#34; : &#34;1.3.2&#34;,
    &#34;build_hash&#34; : &#34;dee175dbe2f254f3f26992f5d7591939aaefd12f&#34;,
    &#34;build_timestamp&#34; : &#34;2014-08-13T14:29:30Z&#34;,
    &#34;build_snapshot&#34; : false,
    &#34;lucene_version&#34; : &#34;4.9&#34;
  },
  &#34;tagline&#34; : &#34;You Know, for Search&#34;
}
</code></pre></div><p>The sense console allows to avoid using curl and do it from browser: - &lt;http://localhost:9200/_plugin/marvel/sense/ &gt;</p>
<p><img src="/images/es-1.png" alt=""></p>
<h2 id="cluster">Cluster</h2>
<p>same name in cluster.name, default</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">➜  elasticsearch-1.3.2  cat config/elasticsearch.yml | grep cluster.name
#cluster.name: elasticsearch
</code></pre></div><p>Node names are generated, often funny</p>
<ul>
<li>Sea Urchin</li>
<li>Franz Kafka</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">➜  elasticsearch-1.3.2  grep -r &#39;initializing ...&#39; logs/
logs//elasticsearch.log:[2014-08-28 00:00:32,437][INFO ][node                     ] [Thing] initializing ...
logs//elasticsearch.log:[2014-08-28 00:02:01,637][INFO ][node                     ] [Stacy X] initializing ...
logs//elasticsearch.log:[2014-08-28 00:21:50,121][INFO ][node                     ] [Ursa Major] initializing ...
logs//elasticsearch.log:[2014-08-28 10:32:37,790][INFO ][node                     ] [Sea Urchin] initializing ...
logs//elasticsearch.log.2014-08-21:[2014-08-21 16:39:34,140][INFO ][node                     ] [Moonstone] initializing ...
logs//elasticsearch.log.2014-08-26:[2014-08-26 12:15:31,948][INFO ][node                     ] [Hydro-Man] initializing ...
logs//elasticsearch.log.2014-08-27:[2014-08-27 11:17:08,325][INFO ][node                     ] [Joe Fixit] initializing ...
logs//elasticsearch.log.2014-08-27:[2014-08-27 23:57:11,077][INFO ][node                     ] [Overkill] initializing ...
</code></pre></div><h1 id="apis">APIs</h1>
<p>Two built in java clients - port 9300, native protocol</p>
<p>Must have same Java version</p>
<ul>
<li>node client (non-data mode)</li>
<li>transport client (send to remote cluster, does not join the cluster)</li>
</ul>
<p>APIs for Java, JS, Groovy, Perl, PHP, Python, Ruby (even .NET).</p>
<p>Community API for command line</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">➜  elasticsearch-1.3.2  curl -s download.elasticsearch.org/es2unix/es &gt;~/bin/es
➜  elasticsearch-1.3.2  es version
zsh: permission denied: es
➜  elasticsearch-1.3.2  chmod +x ~/bin/es
➜  elasticsearch-1.3.2  es version
es            20140723711d4f9
elasticsearch 1.3.2
  
➜  elasticsearch-1.3.2  es indices -v
status name                pri rep size    bytes   docs
yellow logstash-2014.08.21   5   1         19313      5
yellow shakespeare           5   1      19087632 111396
yellow logstash-2014.08.22   5   1         47220     18
yellow logstash-2014.08.27   5   1      24996521  14490
yellow logstash-2014.08.28   5   1      36012778  22645
yellow kibana-int            5   1         36253      3
yellow .marvel-kibana        5   1          3586      1
yellow logstash-2013.12.11   5   1          9943      1
  
➜  elasticsearch-1.3.2  es nodes
yI0t6FIPTAm83QlwXWvO1Q 192.168.179.121 9200 192.168.179.121 9300 1.7.0_55 10.6% 0 d * Sea Urchin
</code></pre></div><h2 id="restfull-api---9200">Restfull API - 9200</h2>
<ul>
<li>GET, POST, PUT, HEAD, DELETE</li>
<li>optional ?pretty</li>
</ul>
<p>Shorthand:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">curl -XGET &#39;localhost:9200/_count?pretty&#39; -d &#39;
{
    &#34;query&#34;: {
        &#34;match_all&#34;: {}
    }
}&#39;
</code></pre></div><p>=&gt;</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">GET /_count
{
    &#34;query&#34;: {
        &#34;match_all&#34;: {}
    }
}
</code></pre></div><p>Documents are in JSON - <a href="http://en.wikipedia.org/wiki/Json">http://en.wikipedia.org/wiki/Json</a>.
All clients handle conversion to JSON automagically</p>
<p>See Tutorial on Elastic <!-- raw HTML omitted -->post<!-- raw HTML omitted --></p>
<h1 id="kibana">Kibana</h1>
<p>Tutorial from: <a href="http://www.elasticsearch.org/guide/en/kibana/current/using-kibana-for-the-first-time.html">http://www.elasticsearch.org/guide/en/kibana/current/using-kibana-for-the-first-time.html</a></p>
<p>Applying mapping to prevent indexing of some fields</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">curl -XPUT http://localhost:9200/shakespeare -d &#39;
{
 &#34;mappings&#34; : {
  &#34;_default_&#34; : {
   &#34;properties&#34; : {
    &#34;speaker&#34; : {&#34;type&#34;: &#34;string&#34;, &#34;index&#34; : &#34;not_analyzed&#34; },
    &#34;play_name&#34; : {&#34;type&#34;: &#34;string&#34;, &#34;index&#34; : &#34;not_analyzed&#34; },
    &#34;line_id&#34; : { &#34;type&#34; : &#34;integer&#34; },
    &#34;speech_number&#34; : { &#34;type&#34; : &#34;integer&#34; }
   }
  }
 }
}
&#39;;
  
{&#34;acknowledged&#34;:true}
  
[2014-08-27 19:43:07,087][INFO ][cluster.metadata         ] [Joe Fixit] [shakespeare] creating index, cause [api], shards [5]/[1], mappings [_default_]
</code></pre></div><p>Loaded shakespeare.json</p>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Miro Adamy</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2014-08-27
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content">(c) 2006-2020 Miro Adamy</span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/elasticsearch/">elasticsearch</a>
          <a href="/tags/elk/">elk</a>
          <a href="/tags/search/">search</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/posts/2014-08-28-elastic-tutorial/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Tutorial on Elastic</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/posts/2014-08-26-find-class/">
            <span class="next-text nav-default">Finding out the class in ATG installation</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:miro.adamy@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://www.linkedin.com/in/miroadamy/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://stackoverflow.com/users/369692/miro-a" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://github.com/miroadamy" class="iconfont icon-github" title="github"></a>
      <a href="https://gitlab.com/miro.adamy" class="iconfont icon-gitlab" title="gitlab"></a>
      <a href="https://bitbucket.org/%7Bc05adff9-951c-4ad1-9a83-e43a1af1b81a%7D/" class="iconfont icon-link" title="link"></a>
      <a href="https://www.instagram.com/miro.adamy/?hl=sk" class="iconfont icon-instagram" title="instagram"></a>
      <a href="https://twitter.com/miroadamy" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://www.facebook.com/miro.adamy" class="iconfont icon-facebook" title="facebook"></a>
  <a href="https://miroadamy.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2006 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">olOwOlo</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>








</body>
</html>
